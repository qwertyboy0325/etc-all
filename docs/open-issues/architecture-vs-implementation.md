### 待解決事項：架構 vs 實作差異對照

更新時間：2025-10-08

- 現況：單一 FastAPI 應用，具多專案與 RBAC、任務/標注/審核/通知、MinIO 上傳與 .npy/.npz 分析、前端 Three.js 渲染。
- 差異：文檔規劃含微服務/API Gateway、Celery/Redis 任務隊列、Prometheus/Sentry/structlog 等非功能與平台層，現階段尚未落地；前端狀態管理規劃為 Redux，現況為 Zustand + react-query。

#### 架構與部署
- [ ] 微服務與 API Gateway：現況為單體，未拆分服務與 Gateway。
- [ ] 任務佇列（Celery/Redis）：將檔案處理、通知等移出同步請求。
- [ ] 監控與追蹤：Prometheus 指標、Grafana Dashboard、Sentry 錯誤追蹤。
- [ ] 結構化日誌與審計：structlog、關鍵操作審計軌跡。
- [ ] 安全控制：速率限制、金鑰輪替、密碼/Token 策略落地。

#### 後端應用層
- [x] 多專案模型與 RBAC（全域/專案）基本完成。
- [x] 任務/標注/審核/通知主要 API 與服務層。
- [ ] 任務自動分配策略強化（負載/專長/優先級綜合）。
- [ ] 標注/審核流程之異常處理與重試策略。
- [ ] 檔案處理背景化（大型檔改以佇列處理）。

#### 檔案與存儲
- [x] MinIO 上傳/下載、.npy/.npz 解析與 bounding box 計算。
- [ ] 大檔切片上傳/續傳與完整性校驗。
- [ ] 檔案清理與排程（舊檔/失敗檔清理）。

#### 前端應用
- [x] Three.js 點雲渲染、.npy/.npz 載入、座標系與視角控制。
- [ ] 狀態管理對齊：文檔為 Redux，現況為 Zustand + react-query（需決策）。
- [ ] 依專案 membership 角色細化 UI 顯示/操作限制。
- [ ] 大點雲性能優化（LOD/分批渲染等，可依里程碑後移）。

#### 文件與流程
- [ ] API 規格：OpenAPI 覆蓋檢查/補完與一致性校驗。
- [ ] 開發/測試標準：代碼規範、測試覆蓋率門檻與驗收標準落地。
- [ ] CI/CD：部署腳本整合監控、密鑰管理與自動檢查。
- [ ] 文檔校準：若持續採單體 + Zustand，需調整設計文檔敘述。

#### 風險與里程碑
- [ ] 非功能需求落地時程（觀測性、佇列）與資源規劃。
- [ ] 性能壓測與容量規劃（上限、退化策略、指標門檻）。


